---
layout:     post
title:      "20200323->20200329总结"
subtitle:   "infoQ文章阅读总结"
date:       2020-03-30 08:30:00
author:     "aguozhang"
header-img: "img/post-bg-2015.jpg"
tags:
    - 中台
    - 微服务 
    - 总结 
    - 架构

    - 
---


## 摘录与感想

* 微服务成了连接业务架构与中台的一个桥梁
* 微服务实施的前提：计算资源的快速分配，基本的监控， 快速部署
* c4isr 军事术语 command control communications computers intelligence surveillance reconnaissance 指挥自动化系统
* 滴滴说中台一个伪需求
* 企业数字化转型的根本需求： 敏捷创新 数据智能
* 首先，企业要想实现数字化转型，内部流程一定要能够支持自动化的高效运转，因此底层一定要用devops体系来做支撑，只有企业内部各部门之间的协作更加流畅高效，才能改善业务上新、变更慢等一系列现状
* 其次， 在devops层之上构建有关业务的一系列paas层，类似于数据中台，业务中台，ai中台等等，根据企业的需要来构建不同的域
* 最后，在架构的最顶端，企业需要能够快速看到并实现业务、功能的变更与上新所带来的效果。因此，需要采用类似于service mesh服务网格之类的技术，为企业提供可自定义编排的能力
* 中台只是企业数字化转型的很小一部分
* 阿里中台开始叫 企业内部技术架构的数字化转型
* 自然演化的结果
* 中台其实只是一个做了业务共享的paas层而已
* 底层是devops， 在上层是业务能力paas层，就是我们现在统称的中台部分。将这些能够实现数字化转型的能力服务化出来，在这基础之上，建立起 领域平台
* 可以将领域平台理解为Gartner的网格应用、service mesh。 在这个层面，有会员域、制造域、供应链域等等。怎么理解这个域？ 以会员域为例，不应该只是一个业务中台或数据中台，应该是service mesh的结构，是基于网格编排能力，整合了业务、数据、AI能力之后，能够形成完整场景闭环的服务能力
* 围绕数字化转型的本质去做创新，不要被概念所禁锢
* 对于一家创业公司来说，视野是最重要的事 一件是视野 一件是价值创新

* 未来10年最大红利是什么
* 任何先进的技术、产品和解决方案，只有转化为客户的商业成功才能产生价值。在产品投资决策上，我们坚持客户需求导向优先于技术导向，要在深刻理解客户需求的前提下，对产品和解决方案进行持续创新，我们的产品和解决方案才会有持续的竞争力
* it基础设计重构、业务重构、运营模式重构、商业模式重构
* ABC AI bigdata cloud
* 新一代基础设施已经进入落地深水区和快速发展路径，这已不是趋势，而是落地节奏的问题
* 要素增长 全要素生产率增长
* 业务重构是数字化转型的核心
* 业务本质是一种服务能力
* 服务企业在不确定的环境下如何更高效地去创造价值
* 中台目前来看是业务服务化治理逻辑在泛电商领域的一个最佳实践，只是一种范式，是否有边界，是否有其他范式，都还在探索之中。
* 基础设施层 服务能力层 业务应用层
* 解耦化 场景服务化 能力编排化
*
*
* 思考手上的工作，找到它的价值和定位，就找到了工作的目标 努力将价值最大化
* 数据集成和系统解耦
* 解耦是消息队列解决的最本质的问题，价值所在
* 微服务就像是DDD的心上人，使得DDD真正焕发起了青春
*
* Laravel：不要在config文件夹下的代码中使用config(),底层使用文件inode排序的
* 治学先治史
* 中台战略主要是指通过 小前台 ，大中台 的架构方式，降低试错成本，加快响应速度，从而真正做到降本增效
* 企业需要的中台是什么？ 指挥官体系
* VUCA环境
* 中台是用来开源的，不是节流的
* 出于省钱的目的都不应该去建设中台
* 天下无中台，只有指挥官体系
* 中台不一定要消除烟囱，中台也只能自己做
* 指挥官体系：协同和进化
*
* 数据的接入、清洗、 加工、整合
* 中台的建设：组织架构的调整必不可少，却鲜有人提
* 组织架构一定要调整，但动组织就意味着在动 权力 金钱 人员
* 员工则是有苦说不出，只能默默流泪
* 分布式应用服务平台  共享业务事业部  阿里巴巴集团业务
* 中台往往是企业里面最费力不讨好、最容易失败的团队，做不好看起来就是在给各个团队制造麻烦
* 数据中台是一把手工程
* 中台战略一定是自顶向下的
*
因此，企业的每一次组织架构调整都是需要经过慎重考虑的，并且也需要让每一位员工清楚自己的定位。采访中，王健表示：我认为阿里的中台战略之所以能够成功落地，最关键利益于组织架构调整的能力。组织架构调整最难的是让每个员工都能快速了解其后的战略意图，并快速适应新的组织架构，知道接下来在新的组织架构下自己该干什么，从而让战略调整落地，这是需要一套机制和文化基础来保证的。我看到很多企业在学阿里，高层不断的在调整组织，但底下的员工都是懵的，不知道为什么调整，以及接下来自己要做什么
* 落地中台，贵在其神，活用其形

* 中台适用的情况：
* 大型复杂的生态系统
* 业务形态具备不确定性
* 存在重复建设
* 存在数据互联互通的问题
*
* 建立共享研发团队
* 统一公司技术路线
*
* 中台战略一定是老板工程
* 数据中台强调的是一种复用能力。很多企业的愿景都是 将数据用起来，这也是数据平台类型企业基础设施的定位目标。
* 数据中台是一个集数据采集、融合、治理、组织管理、智能分析为一体，将数据以服务方式提供给前台应用，以提升业务运行效率、持续促进业务创新为目标的整体平台。
* 看十年，做一年
* 时至今日，在容器技术领域依然有许多创新，只不过这些创新大多发生在Kubernetes以及CNCF生态系统中了
* service mesh 化繁为简：基于Istiod回归单体设计
* Premature optimization Complexity is the root of all evil or: How I learned to stop worrying and love the monolith
* 在没有量化的性能测试检测出真正存在的性能问题前，各种在代码层面的 炫技式 优化，可能不仅提升不了性能，反而会导致更多bug
* 复杂是万恶之源，停止焦虑，爱上单体
* 组件式开发，而不是微服务式开发
* 永远没有完美的架构，只有最合适的架构
* ODS 操作型数据存储 
* ODS通常会被用来当做数据仓库的数据来源。
*
* 让数据业务化
* 微服务还必须具有高度自动化、高度可观察性、容错性以及分布式系统组件必须具备的任何其它特性。这是一个并非所有人一开始都意识得到，并且也不一定愿意付出的代价
* 未来的关注点：离线转实时，容器化，机器学习
* 趣头条基于clickhouse玩转每天1000亿数据量
*
* 稳定的、基于sql、方便进行数据回溯、并且要足够快速的引擎
* clickhouse presto druid
*
*
* saga是什么？ saga的定义是 长时间活动的事务（Long Lived Transaction 简称LLT)
* Docker的凋零与Kubernetes的兴起
*
* 什么是pod?
* 什么是部署？
* 什么是有状态集?
* 如何在不停机的情况下更新应用程序？
* 什么是命名空间？什么时候使用？
* 你能说出一些kubernetes的命令吗？
*
* 微服务，版本组合爆炸
* 开发人员编写测试
* 每个组件都有自己定义良好的CI管道，到目前为止，这一过程已经被很好地建立了，每个组件的CI问题基本上已经基本解决了
* 智能集成引擎 位于各种CI管道的顶部，将组件项目组装到最终的产品中，运行测试，并在给定当前组件的情况下找出完成功能所需的最短路径，并计算风险因素。如果不能进行升级，引擎就会向开发人员发出警告，告诉他们最佳候选对象是什么能及是哪些地方导致地失败。同样，测试也是至关重要的，集成引擎会使用测试作为参考点。
* 然后，CD管道从智能集成引擎中提取数据并执行实际的发布。这样就完成了整个循环流程
*
*
* Gartner魔力象限云计算
* 我们创造了一个新概念：数据湖。数据湖是一种比数据集市更自然的数据存储理念，即在系统或存储库中以自然格式存储数据的方法
*
* AWS认为数据湖需满足以下我特征：
* 集中式存储，满足 a single source of truth 唯一真知来源原则 
* 收集和存储任何类型的数据，包括结构化、半结构化、非结构化以及原始数据
* 快速轻松地执行新类型的数据分析
* schema-on-read 读时校验模式，而非写时模式
* 低成本存储
* 计算和存储分离
* 保护数据并防止未经授权的访问
*
*
现在很多企业都建立了用于报告和分析目的的数据仓库，使用各种来源的数据，包括自己的交易处理系统和其他数据库，但建立和运行数据仓库和大数据框架既复杂又昂贵。当数据量增长或者需要向更多用户提供分析和报告时，如果不想在昂贵的升级过程上投入过多人力和精力，就需要选择更现代的架构设计以实现更低成本的存储和查询 

* S3
* EMR  amazon elastic mapreduce
* 大数据和云计算，在未来的发展方向上，终于通过数据湖融合到了一起
* data lake存储的核心也慢慢转为S3
* 数据湖的数据分析完整流程有收集、存储、分析、应用 四个大的阶段
* 它们之间没有绝对的先后次序，没有必要等所有数据都收集好了才开始后面的步骤，在建设阶段的初期应该就要搭建好基本的数据分析管道，后期在此基础之上再根据数据分析业务的需求进行丰富和增加。
* API gateway
* Lake Formation
* 小红书使用数据湖
* 流利说使用数据湖
*
* Kafka的作用：
* 在线集群， kafka作为消息中间件，为不同在线业务之间提供快去睡觉消息通知服务
* Log集群， 业务程序直接将Log打给kafka,并通过kafka进行传输和收集
* 离线集群，log数据最终的汇聚点，数据会被实时dump到hdfs中，这部分数据用于离线处理。

* Hadoop cdh Kafka Flink Druid
* HDFS服务存储对象本身的数据本身
* Hbase存储对你的索引
* 整体由gateway服务进行对象存储逻辑层的实现
* Hadoop(狭义Hadoop)主要指的是hdfs, yarn, mr这三个服务，主要解决了企业离线数据分析的场景需求。

* 云架构
* Iaas层
* Paas层
* Saas层
*
* 20条编码原则
* 不要纠结于开发工具,根据需求来选择工具
* 代码是写给人看的, 要考虑到初级开发者
* 优秀的软件是协作的结果。要高效沟通、高效协作
* 分而治之，分离关注点
* 不要把自己与代码捆绑在一起
* 安全性是分层的
* 每一行代码都是有生命周期的，但终都会死掉
* 人和代码是分离的，不要把个人标识融入到代码中
* 技术负债就像是快餐一样，偶尔欠下一点技术债务是可接受的，但如果你习惯了这样，它会毁掉你的产品（而且是以让你措手不及的方式）
* 在寻找解决方案时，请按照这样的优先级进行决策： 安全性-> 可用性 -> 可维护性 -> 简单性 -> 简洁性 -> 性能
* 拷贝粘贴是滋生bug的温床
* 不要只顾着写正常的代码，处理异常的代码也要好好写
* 不要使用依赖项，除非使用它们的成本比你自己写代码的成本低很多
* 远离 "炒作驱动开发"， 但你要去了解它们，做一些尝试
* 走出舒适区，每天都要学习。把学到的东西分享出来。如果你以大师自居，就不是在学习。接触更多的编程语言、技术、文化，保持一颗好奇心
* 好代码不需要注释，优秀的代码提供了良好的注释，可以让任何一个原先没有参与代码演进、试错和需求过程的人更容易阅读、修改它。
* 尽量避免使用重载、继承和隐式的智能特性。
* 在彻底了解问题之前不要急着写代码。花在倾听和了解问题上的时间通常比花在写代码上的时间要多。在写代码之前要先了解问题域。问题就像迷宫一样，你要循序渐进，反复进行 编码 测试 改进，直到把问题解决为止。
* 不要尝试去解决不存在的问题。 不要进行投机性编程。只有在确定代码确实需要具备扩展性之后才让代码具备可扩展性。通常情况下，当代码被扩展之后，你会发现问题会变得与原先认为的不一样了
* 大定一起开发软件会更加有趣。建立可持续发展的社区。倾听、激发灵感，学习，分享
*
* 中台完成从0到1建设，从1到100,需要运营
* 数据中台与业务中台
* 这可以理解为数据中台方法论中的One data, 另外还有两个方法论为One model和 One service,就是数据中台的数据会有统一的建模方式，不需要每次都从头开始利用数仓的方法进行建模，这个建模过程也可以工具化、产品化，开发人员不需要每次都重新写代码，可以直接选择数据源和数据指标，并对数据进行自动加工，只有这样才会对业务产生价值。
* 在李楠看来，大数据平台和数据中台本来就是两种不同的技术手段，大数据平台没有这些方法论，只是一个大数据算力平台和基础设施平台。至于上面的管理工具，如何建立数据仓库等与大数据平台关系不大，大数据平台只是思考如何调度可以尽快运行并处理如此庞大的数据量，这与数据中台存在本质不同。
* 数据中台强调的是数据复用的能力，使用数据中台最明显的效果就是提升开发效率，使用封装好的工具平台，降低开发难度，数据分析的速度会大大提高
* i-DP
*
* Using GraphOL to Improve data hydration in our customer care platform and Beyond
*
* 设计一个数据中台，总共分几步？
* 明确中台边界
* 以战略和战术层面的数据能力供给为核心
* 数据中台不只是数据仓库
* 数据仓库是面向主题的，数据集市是面向应用的
* 数据沉淀，数据仓库的主题是数据层面的高度抽象，基本不体现业务流程。今天，数据应用的大趋势是强化对"一线操作"数据赋能，必然更加关注业务流程
* 业务域是对业务流程的抽象，可以说是面向流程的，本质还是面向应用的

